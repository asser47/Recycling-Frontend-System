<!-- ================= ğŸ–¥ï¸ Desktop Navbar ================= -->
<nav class="navbar-desktop">
  <div class="navbar-container">

    <!-- ===== Left ===== -->
    <div class="navbar-left">

      <!-- Logo -->
<a class="logo-link logo-btn" (click)="goHomeAndReset()">
  <div class="logo-icon">
    <img src="assets/GreenZone Logo.png" alt="GreenZone Logo" />
  </div>
  <span class="logo-text">Green Zone</span>
</a>


      <!-- ===== Role Based Links ===== -->
      @if (isLoggedIn() && !isAuthRoute()) {

        <!-- ================= ADMIN ================= -->
        @if (isAdmin()) {
          <div class="nav-links admin-links">
            <a routerLink="/admin/dashboard" routerLinkActive="active" class="nav-link">Dashboard</a>
            <a routerLink="/admin/materials" routerLinkActive="active" class="nav-link">Materials</a>
            <a routerLink="/admin/factories" routerLinkActive="active" class="nav-link">Factories</a>
            <a routerLink="/admin/orders" routerLinkActive="active" class="nav-link">Orders</a>
            <a routerLink="/admin/users" routerLinkActive="active" class="nav-link">Users</a>
            <a routerLink="/admin/rewards" routerLinkActive="active" class="nav-link">Rewards</a>
            <a routerLink="/admin/collectors" routerLinkActive="active" class="nav-link">Collectors</a>
            <a routerLink="/admin/add-collector" routerLinkActive="active" class="nav-link">Add Collector</a>
          </div>
        }

        <!-- ================= COLLECTOR ================= -->
        @if (isCollector()) {
          <div class="nav-links">
            <a routerLink="/collector-dashboard" routerLinkActive="active" class="nav-link">Dashboard</a>
            <a routerLink="/collector-requests" routerLinkActive="active" class="nav-link">My Orders</a>
          </div>
        }

        <!-- ================= USER ================= -->
        @if (isUser()) {
          <div class="nav-links">
            <a routerLink="/citizen-dashboard" routerLinkActive="active" class="nav-link">Dashboard</a>
            <a routerLink="/rewards" routerLinkActive="active" class="nav-link">
              Rewards
              @if (userPoints()) {
                <span class="points-badge">{{ userPoints() }}</span>
              }
            </a>
            <a routerLink="/my-requests" routerLinkActive="active" class="nav-link">My Requests</a>
          </div>
        }

      }
    </div>

    <!-- ===== Right ===== -->
    <div class="navbar-right">

      <!-- ğŸ”” Notifications (User + Collector ÙÙ‚Ø·) -->
      @if (isLoggedIn() && !isAuthRoute() && !isAdmin()) {
        <div class="relative">
<button class="action-btn" (click)="toggleNotifications()">
  <i class="fa-regular fa-bell"></i>
</button>

          @if (showNotificationsDropdown()) {
            <div class="dropdown-overlay" (click)="closeDropdowns()"></div>
            <div class="dropdown-menu">
              <a routerLink="/notifications" class="dropdown-item">
                View all notifications
              </a>
            </div>
          }
        </div>
      }

      <!-- ğŸŒ Language -->
<button class="action-btn" (click)="languageService.toggleLanguage()">
  <i class="fa-solid fa-globe"></i>
</button>

      <!-- ğŸŒ™ / â˜€ï¸ Theme -->
<button class="action-btn" (click)="themeService.toggleTheme()">
  <i
    class="fa-solid"
    [class.fa-moon]="themeService.theme() === 'light'"
    [class.fa-sun]="themeService.theme() !== 'light'">
  </i>
</button>


      <!-- ğŸ‘¤ User Menu (User + Collector) -->
      @if (isLoggedIn() && !isAdmin()) {
  <div class="relative">
<button
  class="user-menu-btn"
  (click)="toggleUserMenu($event)"
>


      <!-- Info -->
      <div class="user-info">
        <span class="user-name">{{ displayName() }}</span>
        <span class="user-role">{{ roleLabel() }}</span>
      </div>

      <i class="fa-solid fa-chevron-down dropdown-arrow"></i>
    </button>

    @if (showUserMenu()) {
  <div class="dropdown-menu user-dropdown">

    <div class="dropdown-user-card">
      <div>
        <strong>{{ displayName() }}</strong>
        <span>{{ roleLabel() }}</span>
      </div>
    </div>

        <div class="dropdown-separator"></div>

    <a [routerLink]="getDashboardRoute()" class="dropdown-item">
      <i class="fa-solid fa-gauge"></i>
      Dashboard
    </a>

    <a routerLink="/settings" class="dropdown-item">
      <i class="fa-solid fa-gear"></i>
      Settings
    </a>
        <div class="dropdown-separator"></div>


    <button class="dropdown-item logout-btn" (click)="logout()">
      <i class="fa-solid fa-right-from-bracket"></i>
      Logout
    </button>
      </div>
    }
  </div>
}


@if (isLoggedIn()) {
  <button class="btn-ghost logout-direct" (click)="logout()">
    Logout
  </button>
}

      <!-- ğŸ‘‹ Guest -->
      @if (!isLoggedIn() && !isAuthRoute()) {
        <a routerLink="/login" class="btn-ghost">Login</a>
        <a routerLink="/register" class="btn-primary">Get Started</a>
      }

    </div>
  </div>
</nav>

<!-- ================= ğŸ“± Mobile Bottom Navbar ================= -->
<!-- @if (isLoggedIn() && !isAuthRoute() && !isAdmin()) {
  <nav class="navbar-mobile-bottom"> -->

    <!-- Admin -->
    <!-- @if (isAdmin()) {
      <a routerLink="/admin/dashboard" routerLinkActive="active" class="mobile-nav-item">ğŸ“Š</a>
      <a routerLink="/admin/orders" routerLinkActive="active" class="mobile-nav-item">ğŸ“¦</a>
      <a routerLink="/admin/users" routerLinkActive="active" class="mobile-nav-item">ğŸ‘¥</a>
    } -->

    <!-- Collector -->
    <!-- @if (isCollector()) {
      <a routerLink="/collector-dashboard" routerLinkActive="active" class="mobile-nav-item">ğŸ“</a>
      <a routerLink="/my-requests" routerLinkActive="active" class="mobile-nav-item">ğŸ“¦</a>
    } -->

    <!-- User -->
    <!-- @if (isUser()) {
      <a routerLink="/citizen-dashboard" routerLinkActive="active" class="mobile-nav-item">ğŸ </a>
      <a routerLink="/rewards" routerLinkActive="active" class="mobile-nav-item">ğŸ</a>
      <a routerLink="/my-requests" routerLinkActive="active" class="mobile-nav-item">ğŸ“„</a>
    } -->

    <!-- Logout -->
    <!-- <button class="mobile-nav-item logout-mobile" (click)="logout()">ğŸšª</button>
  </nav>
} -->
